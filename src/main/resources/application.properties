spring.application.name=AlonsoBD

# Puerto
server.port=8080

# ============================================
# PostgreSQL
# ============================================
spring.datasource.url=jdbc:postgresql://localhost:5432/AlonsoBD
spring.datasource.username=postgres
spring.datasource.password=123
spring.datasource.driver-class-name=org.postgresql.Driver

# Inicialización con schema.sql y data.sql (desactivado)
spring.sql.init.mode=never
spring.sql.init.encoding=UTF-8

# JPA/Hibernate
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Server configuration
server.tomcat.max-http-form-post-size=2MB
server.tomcat.max-swallow-size=2MB
server.compression.enabled=false
server.servlet.encoding.force=true
server.servlet.encoding.charset=UTF-8
server.tomcat.connection-timeout=20000
spring.mvc.async.request-timeout=20000

# Response settings
server.servlet.encoding.enabled=true
server.servlet.encoding.force-response=true
server.tomcat.max-threads=200
server.tomcat.accept-count=100
server.tomcat.max-connections=8192
server.tomcat.uri-encoding=UTF-8
server.tomcat.force-request-http11=true

# Disable chunked encoding
server.compression.enabled=false
server.tomcat.use-relative-redirects=true
spring.mvc.ignore-default-model-on-redirect=true

# Show full stacktraces in error responses (useful for debugging locally)
server.error.include-stacktrace=always
server.error.include-message=always
server.error.include-binding-errors=always

# Increase logging for web/thymeleaf/security to help root-cause template/controller errors
logging.level.org.springframework.web=TRACE
logging.level.org.springframework.security=TRACE
logging.level.org.thymeleaf=TRACE
logging.level.com.integradorii.gimnasiov1=TRACE

# Log pattern with more details
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger{36} - %msg%n

# ============================================
# Email Configuration (JavaMail)
# ============================================
# Configuración para Gmail SMTP (PRODUCCIÓN - Envía correos reales)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=andre.er2003@gmail.com
spring.mail.password=jxgujizybdkwuqjq
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Configuración anterior de Mailtrap (Testing - DESACTIVADO)
# spring.mail.host=smtp.mailtrap.io
# spring.mail.port=2525
# spring.mail.username=2f286f9ce08efd
# spring.mail.password=3527921a7ae01e
# spring.mail.properties.mail.smtp.auth=true
# spring.mail.properties.mail.smtp.starttls.enable=true

# IMPORTANTE: Para Gmail debes:
# 1. Ir a https://myaccount.google.com/security
# 2. Activar "Verificación en dos pasos"
# 3. Generar una "Contraseña de aplicación" en https://myaccount.google.com/apppasswords
# 4. Usar esa contraseña de aplicación en spring.mail.password

# ====== Alternativa: Mailtrap (Para testing/desarrollo) ======
# spring.mail.host=smtp.mailtrap.io
# spring.mail.port=2525
# spring.mail.username=tu-username-mailtrap
# spring.mail.password=tu-password-mailtrap
# spring.mail.properties.mail.smtp.auth=true
# spring.mail.properties.mail.smtp.starttls.enable=true

# URL base de la aplicación (usado para construir enlaces de verificación)
app.base-url=http://localhost:8080
