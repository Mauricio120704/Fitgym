<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title th:text="'Recibo de pago ' + ${payment.code}">Recibo de pago</title>
  <style>
    @page {
      size: A4;
      margin: 20mm;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        Roboto, sans-serif;
      font-size: 12px;
      color: #111827;
    }

    .receipt {
      max-width: 700px;
      margin: 0 auto;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      border-bottom: 2px solid #ff8a3d; /* tu naranja de la app */
      padding-bottom: 8px;
      margin-bottom: 12px;
    }

    .brand {
      max-width: 60%;
    }

    .brand-name {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 2px;
    }

    .brand-meta {
      font-size: 11px;
      color: #6b7280;
      line-height: 1.4;
    }

    .meta {
      text-align: right;
      font-size: 11px;
    }

    .meta-title {
      font-size: 16px;
      font-weight: 700;
      letter-spacing: 1px;
      margin-bottom: 4px;
    }

    .meta-row {
      margin: 1px 0;
    }

    .label {
      font-weight: 600;
      color: #4b5563;
    }

    .badge {
      display: inline-block;
      border-radius: 999px;
      padding: 1px 8px;
      font-size: 10px;
      font-weight: 600;
    }

    .badge-success {
      background: #dcfce7;
      color: #166534;
    }

    .badge-pending {
      background: #fef9c3;
      color: #854d0e;
    }

    .badge-failed {
      background: #fee2e2;
      color: #b91c1c;
    }

    .section {
      margin-bottom: 10px;
    }

    .section-title {
      font-size: 11px;
      text-transform: uppercase;
      color: #6b7280;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .box {
      border: 1px solid #e5e7eb;
      border-radius: 4px;
      padding: 8px 10px;
    }

    .row-2 {
      display: flex;
      gap: 12px;
    }

    .row-2 > div {
      flex: 1;
    }

    .field {
      margin: 2px 0;
    }

    .field span.value {
      font-weight: 500;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }

    th,
    td {
      padding: 6px 4px;
      border-bottom: 1px solid #e5e7eb;
    }

    th {
      text-align: left;
      text-transform: uppercase;
      font-size: 10px;
      color: #6b7280;
    }

    td.numeric {
      text-align: right;
    }

    .summary {
      margin-top: 6px;
      width: 100%;
    }

    .summary-row {
      display: flex;
      justify-content: flex-end;
      font-size: 12px;
    }

    .summary-label {
      margin-right: 16px;
      font-weight: 500;
      color: #374151;
    }

    .summary-value {
      min-width: 90px;
      text-align: right;
    }

    .summary-row.total {
      margin-top: 4px;
      border-top: 1px solid #9ca3af;
      padding-top: 4px;
      font-weight: 700;
    }

    .footer {
      margin-top: 16px;
      font-size: 10px;
      color: #6b7280;
      text-align: center;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <div class="receipt">
    <!-- ENCABEZADO -->
    <div class="header">
      <div class="brand">
        <!-- Si tienes logo, puedes usar: <img th:src="${gym.logoUrl}" alt="Logo" style="height:40px;margin-bottom:4px;"> -->
        <div class="brand-name" th:text="${gym.name}">FitGym</div>
        <div class="brand-meta">
          <span th:text="${gym.legalName}">FitGym</span>
          <span> · RUC </span>
          <span th:text="${gym.taxId}">00000000000</span><br />
          <span th:text="${gym.address}">Dirección del gimnasio</span><br />
          <span th:text="${gym.phone}">000-000-000</span>
          <span> · </span>
          <span th:text="${gym.email}">info@fitgym.com</span>
        </div>
      </div>
      <div class="meta">
        <div class="meta-title">RECIBO DE PAGO</div>
        <div class="meta-row">
          <span class="label">N°:</span>
          <span th:text="${payment.code}">PAY-001</span>
        </div>
        <div class="meta-row">
          <span class="label">Fecha:</span>
          <span th:text="${payment.dateTime}">01/01/2025</span>
        </div>
        <div class="meta-row">
          <span class="label">Estado:</span>
          <span class="badge"
                th:text="${payment.statusLabel}"
                th:classappend="${payment.statusLabel} == 'Completado' ? ' badge-success' : (${payment.statusLabel} == 'Pendiente' ? ' badge-pending' : ' badge-failed')">
            Completado
          </span>
        </div>
      </div>
    </div>

    <!-- DATOS SOCIO + PAGO -->
    <div class="section row-2">
      <div>
        <div class="section-title">Datos del socio</div>
        <div class="box">
          <div class="field">
            <span class="label">Nombre: </span>
            <span class="value" th:text="${member.name}">Juan Pérez</span>
          </div>
          <div class="field">
            <span class="label">Documento: </span>
            <span class="value">
              <span th:text="${member.documentType}">DNI</span>
              <span> </span>
              <span th:text="${member.documentNumber}">12345678</span>
            </span>
          </div>
          <div class="field">
            <span class="label">Código socio: </span>
            <span class="value" th:text="${member.code}">CL-0001</span>
          </div>
          <div class="field">
            <span class="label">Email: </span>
            <span class="value" th:text="${member.email}">cliente@correo.com</span>
          </div>
        </div>
      </div>

      <div>
        <div class="section-title">Datos del pago</div>
        <div class="box">
          <div class="field">
            <span class="label">Plan/servicio: </span>
            <span class="value" th:text="${payment.planName}">Membresía</span>
          </div>
          <div class="field">
            <span class="label">Método: </span>
            <span class="value" th:text="${payment.method}">Tarjeta</span>
          </div>
          <div class="field">
            <span class="label">Referencia: </span>
            <span class="value" th:text="${payment.reference}">N/A</span>
          </div>
          <div class="field">
            <span class="label">Canal: </span>
            <span class="value" th:text="${payment.channel}">Sistema</span>
          </div>
        </div>
      </div>
    </div>

    <!-- DETALLE -->
    <div class="section">
      <div class="section-title">Detalle del pago</div>
      <div class="box">
        <table>
          <thead>
            <tr>
              <th>Concepto</th>
              <th class="numeric">Cant.</th>
              <th class="numeric">Precio unit.</th>
              <th class="numeric">Subtotal</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td th:text="${payment.planName}">Membresía Mensual</td>
              <td class="numeric">1</td>
              <td class="numeric" th:text="${payment.totalFormatted}">S/ 100.00</td>
              <td class="numeric" th:text="${payment.totalFormatted}">S/ 100.00</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- RESUMEN -->
    <div class="section">
      <div class="section-title">Resumen</div>
      <div class="box">
        <div class="summary-row">
          <div class="summary-label">Subtotal</div>
          <div class="summary-value" th:text="${payment.subtotalFormatted}">S/ 100.00</div>
        </div>
        <div class="summary-row">
          <div class="summary-label">Descuento</div>
          <div class="summary-value" th:text="${payment.discountFormatted}">S/ 0.00</div>
        </div>
        <div class="summary-row">
          <div class="summary-label">Impuestos</div>
          <div class="summary-value" th:text="${payment.taxFormatted}">S/ 0.00</div>
        </div>
        <div class="summary-row total">
          <div class="summary-label">Total pagado</div>
          <div class="summary-value" th:text="${payment.totalFormatted}">S/ 100.00</div>
        </div>
      </div>
    </div>

    <!-- PIE -->
    <div class="footer">
      Este recibo corresponde al pago de servicios del gimnasio
      <span th:text="${gym.name}">FitGym</span>.<br />
      Puede utilizarse como constancia de pago. Si requiere comprobante fiscal,
      solicítelo en recepción.<br /><br />
      Gracias por entrenar con nosotros 
    </div>
  </div>
</body>
</html>
