<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalizar Suscripción - FitGym</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
    <link rel="stylesheet" th:href="@{/Estilos/checkout.css}">
</head>
<body>
    <div class="checkout-container">
        <h1 class="checkout-title">Finalizar Suscripción</h1>
        <p class="checkout-subtitle">Completa tu pago de forma segura</p>

        <div class="row">
            <div class="col-lg-5 mb-4">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-receipt"></i>
                        Resumen del Pedido
                    </div>
                    <div class="card-body">
                        <div class="order-summary-item">
                            <span class="label">Plan <span th:text="${planNombre}">Básico</span></span>
                            <span class="value"></span>
                        </div>
                        <div class="order-summary-item">
                            <span class="label">Facturación <span th:text="${periodo}">anual</span></span>
                            <span class="value"></span>
                        </div>
                        <div class="order-summary-item">
                            <span class="label"></span>
                            <span class="value fw-bold">S/ <span th:text="${precio}">499.90</span></span>
                        </div>
                        
                        <div class="order-total">
                            <span>Total a Pagar</span>
                            <span>S/ <span th:text="${precio}">499.90</span></span>
                        </div>
                        
                        <div class="security-note">
                            <i class="fas fa-lock"></i>
                            <span>Pago 100% seguro con encriptación SSL</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-7">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-credit-card"></i>
                        Información de Pago
                    </div>
                    <div class="card-body">
                        <p class="text-muted mb-4">Ingresa los datos de tu tarjeta de crédito o débito</p>
                        
                        <form action="/checkout/pagar" method="post">
                            <input type="hidden" name="usuario" th:value="${usuario}">
                            <input type="hidden" name="plan" th:value="${planNombre}">
                            <input type="hidden" name="periodo" th:value="${periodo}">
                            <input type="hidden" name="precio" th:value="${precio}">
                            <div class="mb-3">
                                <label for="cardName" class="form-label">Nombre del Titular</label>
                                <input type="text" class="form-control" id="cardName" name="nombreTitular"
                                       placeholder="Rocío Cárdenas Quispe Mamani" required>
                            </div>

                            <div class="mb-3">
                                <label for="cardNumber" class="form-label">Número de Tarjeta</label>
                                <input type="text" class="form-control" id="cardNumber" name="numeroTarjeta"
                                       placeholder="1234 5678 8702 2243" 
                                       maxlength="19" required>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="expiryDate" class="form-label">Fecha de Vencimiento</label>
                                    <input type="text" class="form-control" id="expiryDate" name="fechaExpiracion"
                                           placeholder="MM/AA" maxlength="5" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="cvv" class="form-label">Código CVV</label>
                                    <input type="text" class="form-control" id="cvv" name="cvv"
                                           placeholder="123" maxlength="3" required>
                                </div>
                            </div>

                            <div class="action-buttons">
                                <button type="button" class="btn btn-outline-secondary" 
                                        th:onclick="|location.href='@{/planes}'|">
                                    Volver
                                </button>
                                <button type="submit" class="btn btn-custom-orange">
                                    Pagar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
